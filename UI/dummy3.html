    <!doctype html>
    <html>
    <head>
        <title>Mobile Analytics</title>
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <script src="assets/js/jquery.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="assets/js/custom-script.js"></script>
        <script src="assets/js/moment.min.js"></script>
        <script type="text/javascript" src="assets/js/daterangepicker.js"></script>
        <link rel="stylesheet" type="text/css" href="assets/css/daterangepicker.css" />
		<link rel="stylesheet" href="assets/css/bootstrap-select.min.css">
		<script src="assets/js/bootstrap-select.min.js"></script>
		<style>
		.chart rect {
		   stroke: white;
		}
		</style>
    </head>
    <body>
        <aside class="left-side sticky-left-side" tabindex="5000">
            
        </aside>



        <aside class="main-container" >
            <section class="border-bottom">
                <section class="container-fluid chart border-bottom bg-white">
                    <header>
                        <div class="txt-drk-gray"><span class="glyphicon glyphicon-stats txt-green" aria-hidden="true"></span> &nbsp;<span class="">Online Users</span></div>
                    </header>
                    <section id="chart-container"></section>
                </section>
                <section class="">
                    <header>
                        <div class="col-md-6 txt-drk-gray">
							<!--<span class="glyphicon glyphicon-calendar txt-green sel-range" aria-hidden="true"></span> &nbsp;<span class="date-range">May 01, 2016 - May 24, 2016</span> -->
						</div>
						<div class="col-md-6 txt-drk-gray margnTp-5 text-right">
							<div style="display:inline; padding-right:15px">
								<select class="form-control selectpicker" data-width="150px">
									<option value="All">All</option>
									<option value="SmartPhone">SmartPhone</option>
									<option value="Tablet">Tablet</option>
								</select>
							</div>
							<div  style="display:inline">
								<div id="dateRange" class="pull-right">
									<i class="glyphicon glyphicon-calendar txt-green fa fa-calendar"></i><span></span><b class="caret"></b>
								</div>
								<!--<select class="form-control selectpicker" id="selDate" name="selDate" data-width="150px">
									<option value="Today">Today</option>
									<option value="Yesterday">Yesterday</option>
									<option value="Today">Current Month</option>
									<option value="Today">Previous Month</option>
									<option value="Today">3 Months</option>
									<option value="Today">6 Months</option>
									<option value="Today">1 Year</option>
								</select>-->
							</div>
						</div>
                    </header>
                    <div class="">
                        <ul class="event-container">
                            <li class="col-md-2 col-sm-4 ">
                                <section class="text-center box-green">
                                    <div class="event-box">
                                        <span class="text-center">
                                             <img src="assets/img/01.png" />
                                             <label>Total<br />Sessions</label>
                                        </span>
                                        <div class="inner-grey-box text-center">
                                            13
                                        </div>
                                    </div>
                                </section>
                            </li>
                            <li class="col-md-2 col-sm-4 ">
                                <section class="text-center box-aqua">
                                    <div class="event-box">
                                        <span class="text-center">
                                            <img src="assets/img/02.png" />
                                            <label>Total<br />Events </label>
                                        </span>
                                        <div class="inner-grey-box text-center">
                                            13
                                        </div>
                                    </div>
                                </section>
                            </li>
                            <li class="col-md-2 col-sm-4 ">
                                <section class="text-center box-yellow">
                                    <div class="event-box">
                                        <span class="text-center">
                                            <img src="assets/img/03.png" />
                                            <label>Total<br />Users </label>
                                        </span>
                                        <div class="inner-grey-box text-center">
                                            13
                                        </div>
                                    </div>
                                </section>
                            </li>
                            <li class="col-md-2 col-sm-4">
                                <section class="text-center box-pink">
                                    <div class="event-box">
                                        <span class="text-center">
                                            <img src="assets/img/04.png" />
                                            <label>New<br />Users </label>
                                        </span>
                                        <div class="inner-grey-box text-center">
                                            13
                                        </div>
                                    </div>
                                </section>
                            </li>
                            <li class="col-md-2 col-sm-4">
                                <section class="text-center box-red">
                                    <div class="event-box">
                                        <span class="text-center">
                                            <img src="assets/img/05.png" />
                                            <label>Total<br />Time Spent </label>
                                        </span>
                                        <div class="inner-grey-box text-center">
                                            13
                                        </div>
                                    </div>
                                </section>
                            </li>
                            <li class="col-md-2 col-sm-4 ">
                                <section class="text-center box-blue">
                                    <div class="event-box">
                                        <span class="text-center">
                                            <img src="assets/img/06.png" />
                                            <label>Total<br />Crashes </label>
                                        </span>
                                        <div class="inner-grey-box text-center">
                                            13
                                        </div>
                                    </div>
                                </section>
                            </li>
                        </ul>
                    </div>
                </section>
            </section>
        </aside>
        <div class="overlay"></div>
        <script>
		var margin = {top: -30, right: 0, bottom: 40, left: 40}, lastTime = 0, divWidth = $("#chart-container").width()-margin.left - margin.right, data = new Array(), w = $("#chart-container").width()/30, h = 310 - margin.top - margin.bottom, startTime = 0, endTime = 0, xAxisArr = new Array();
			
			var x = d3.scale.linear().domain([0, 1]).range([0, w]);
		  	var y = d3.scale.linear().domain([10, 0]).rangeRound([0, h]);
			
			/*var x = d3.scale.ordinal().rangeRoundBands([0, divWidth], .6);
			var y = d3.scale.linear().range([h, 0]);
			*/
			var xAxis = d3.svg.axis()
			.scale(x)
			//.tickFormat(d3.time.format('%H:%M:%S'))
			.orient("bottom");

			var yAxis = d3.svg.axis().scale(y).orient("left");
			
			var chart = d3.select("#chart-container")
				.append("svg:svg")
				//.attr("class", "chart")
				.attr("width", divWidth)
				.attr("height", h)
				.append("g")
				.attr("transform", 
					  "translate(" + margin.left + "," + margin.top + ")");
			
			d3.json("assets/json/data-1.json", function(error, data1) {
				data1.forEach(function(d) {
					d.TimeObj = new Date(d.Time*1000);
					lastTime = d.Time;
				});
			  /*// scale the range of the data
			  x.domain(data.map(function(d) { return d.TimeObj; }));
			  y.domain([0, d3.max(data, function(d) { return d.DeviceCount; })]);
			  */
		  	/*axis = chart.append("g")
		  		.attr("class", "x axis")
			  	.attr("width",divWidth)
			  	.attr("transform", "translate(0," + h + ")")
			  	  
			  	.call(xAxis)
			  	.selectAll("text")
			  	.style("text-anchor", "end")
			  	.attr("dx", "-.8em")
			  	.attr("dy", "-.55em")
			  	.attr("transform", "rotate(-90)" );*/

			// Create X axis
			chart.append("g")
			  	.attr("class", "x axis")
				.attr("transform", "translate(" + (divWidth-50) + ", " + (h+40) + ")")
				.append("text")
				.attr("dx", "-.8em")
			  	.attr("dy", "-.55em")
				.style("text-anchor", "end")
				.text("Time");
				
	  		chart.append("g")
			  	.attr("class", "y axis")
			  	.call(yAxis)
				.append("text")
				.attr("transform", "rotate(-90)")
				.attr("dy", ".71em")
				.style("text-anchor", "end")
				.text("Device Count");
			  
			  
				data = data1;
				
				startTime = data[0].Time;
				endTime = data[data.length-1].Time;
				
				//alert(startTime + " : " + endTime);
				
				for(i = startTime; i < endTime; i+=60){
					dtObj = new Date(i*1000);
					xAxisArr.push({"values":dtObj.getHours()+":"+dtObj.getMinutes()})
				}
				//console.log(JSON.stringify(xAxisArr));
				
				chart.selectAll("x axis")
					.data(xAxisArr)
					.enter().append("g")
					.attr("class", "tick")
					.attr("transform", "translate(" + (function(d,i){console.log(JSON.stringify(i));return x(i)}-50) + ", " + (h+20) + ")")
					
					.append("text")
					.attr("dx", "-.8em")
					.attr("dy", "-.55em")
					.style("text-anchor", "end")
					.text(function(d,i){return d.values});
			});
 
			 function next() {
				 lastTime += 10;
			   return {
				 "Time" : lastTime,
				 "DeviceCount":Math.floor((Math.random() * 10) + 1),
				 "TimeObj" : new Date(lastTime*1000)
			   };
			 }
			
			setInterval(function() {
				if(data.length >= 30)
					data.shift();
			   data.push(next());
				//console.log(JSON.stringify(data));
			   redraw();
				
			}, 3000);
			
		  	chart.selectAll("rect")
				.data(data)
				.enter().append("svg:rect")
				.attr("class", "bar")
				.attr("x", function(d, i) { return x(d.TimeObj); })
				.attr("y", function(d) { return h - (y(d.DeviceCount)); })
				.attr("width", w)
				.attr("height", function(d) { return y(d.DeviceCount); });
			
			

			
			chart.append("svg:line")
			 	.attr("x1", 0)
			 	.attr("x2", $("#chart-container").width())
			 	.attr("y1", h)
			 	.attr("y2", h)
			 	.attr("stroke", "#000");
			
		
			
		
			
			function redraw() {
			   var rect = chart.selectAll("rect")
				   .data(data, function(d) { return d.TimeObj; });

			   // Enter…
			   rect.enter().insert("svg:rect", "line")
					.attr("class", "bar")
					.attr("x", function(d, i) { return x(d.TimeObj); })
					.attr("y", function(d) { return h - (y(d.DeviceCount)); })
					.attr("width", w)
					.attr("height", function(d) { return y(d.DeviceCount); })
					.transition()
					.duration(1000)
					.attr("x", function(d, i) { return x(i); });

			   // Update…
			   rect.transition()
					.duration(1000)
					.attr("x", function(d, i) { return x(i); });

			   // Exit…
			   rect.exit().transition()
					.duration(1000)
					.attr("x", function(d, i) { return x(i - 1); })
			   		.remove();

			}	
		
		</script>
				
    </body>
    </html>